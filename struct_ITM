#include <iostream>
using namespace std;

int main() {
    struct Mario {
        char preime[40];
        char spol;
        int visina;
        int tezina;
    } osobe[50];
    
    int N;
    float SM = 0, SZ = 0;
    int NZ = 0, NM = 0;

    // Unos validnog broja osoba
    do {
        cout << "N (1 do 50) = ";
        cin >> N;
        if (N < 1 || N > 50) {
            cout << "Krivi upis! Mora biti od 1 do 50." << endl;
        }
    } while (N < 1 || N > 50);

    cout << "Upis za " << N << " osoba." << endl;

    for (int i = 0; i < N; i++) {
        cout << "Prezime i ime: ";
        cin.ignore();
        cin.getline(osobe[i].preime, 40);

        // Unos spola
        do {
            cout << "Spol (M/Z): ";
            osobe[i].spol = cin.get();
            cin.ignore(); // Ignorišemo novi red nakon unosa spola
        } while (osobe[i].spol != 'Z' && osobe[i].spol != 'z' && osobe[i].spol != 'M' && osobe[i].spol != 'm');

        cout << "Visina (cm): ";
        cin >> osobe[i].visina;

        cout << "Težina (kg): ";
        cin >> osobe[i].tezina;

        // Računanje odnosa težine i visine za žene i muškarce
        if (osobe[i].spol == 'z' || osobe[i].spol == 'Z') {
            SZ += (float)osobe[i].tezina / osobe[i].visina;
            NZ++;
        } else {
            SM += (float)osobe[i].tezina / osobe[i].visina;
            NM++;
        }
    }

    // Prosečan odnos težine i visine za žene i muškarce
    if (NZ > 0) SZ /= NZ;
    if (NM > 0) SM /= NM;

    // Ispis osoba sa višim odnosom težine i visine od proseka
    for (int i = 0; i < N; i++) {
        bool iznadProseka = (osobe[i].spol == 'z' || osobe[i].spol == 'Z') ?
                            ((float)osobe[i].tezina / osobe[i].visina > SZ) :
                            ((float)osobe[i].tezina / osobe[i].visina > SM);
        if (iznadProseka) {
            cout << osobe[i].preime << " "
                 << osobe[i].tezina << " "
                 << osobe[i].visina << endl;
        }
    }

    return 0;
}
```

### Objašnjenja:
- **Provera validnosti `N`** je sada samo unutar `do-while` petlje.
- **Uslov za unos spola** je ispravljen da traži unos sve dok nije `'Z'`, `'z'`, `'M'` ili `'m'`.
- **Prosečni odnosi težine i visine** (`SZ` i `SM`) se izračunavaju nakon što su uneti svi podaci.
- **Ispis osoba** čiji odnos težine i visine premašuje prosek je urađen pomoću **ternarnog operatora**.
